/**
* jQuery HTML5 Form Validator
* Author: Justin Kimbrell (SaucePan Creative)
* Build: 1.5 - September 15, 2011
* Copyright 2011 - All rights reserved
* http://objectivehtml.com, http://inthesaucepan.com
*/

var _count=0,_inline_regex=[],_options=[],_default={bind:{before:"focus",after:"blur",active:"keyup"},classes:{before:"before-active",after:"after-active",active:"active",focus:"focus",invalid:"invalid",valid:"valid",placeholder:"placeholder"},invalid:function(a){},valid:function(a){},before:function(a){},after:function(a,b){},active:function(a,b){},focus:function(a,b){},blur:function(a,b){},placeholder:true,reset:true,waitToValidate:true,focusClass:true,appendToParent:false,appendToParents:false};_inline_regex["numbers"]=/^[0-9.]*$/;_inline_regex["whole-number"]=/^[0-9]*$/;_inline_regex["number"]=_inline_regex["numbers"];_inline_regex["float"]=_inline_regex["numbers"];_inline_regex["double"]=_inline_regex["numbers"];_inline_regex["integer"]=_inline_regex["whole-number"];_inline_regex["zipcode"]=/^\d{5}(-\d{4})?$/;_inline_regex["social-security"]=/^(?!000)([0-6]\d{2}|7([0-6]\d|7[012]))([ -]?)(?!00)\d\d\3(?!0000)\d{4}$/;_inline_regex["name"]=/^[a-zA-Z -\/.,0-9]*$/;_inline_regex["address"]=/^([0-9])+([0-9a-zA-Z -\/.,#])*$/;_inline_regex["letters"]=/^[a-zA-Z]*$/;_inline_regex["email"]=/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?$/;_inline_regex["url"]=/(ftp|http):\/\/([_a-z\d\-]+(\.[_a-z\d\-]+)+)(([_a-z\d\-\\\.\/]+[_a-z\d\-\\\/])+)*/;_inline_regex["city"]=/^[A-Za-z. '-]+$/;_inline_regex["us-home-phone"]=/^([0-9]{3})+\-+([0-9]{3})+\-+([0-9]{4})$/;_inline_regex["strong-password"]=/(?=^.{8,}$)((?=.*\d)|(?=.*\W+))(?![.\n])(?=.*[A-Z])(?=.*[a-z]).*$/;_inline_regex["credit-card-expiration"]=/^([0-9]{2})+\/+([0-9]{2})$/;(function($){$.fn.extend({_validate:function(options){var $t=$(this);var valid=true,pattern;var value=$t._val(options);var attr_type=$t.attr("type");var attribute={type:$t.attr("type"),pattern:$t.attr("pattern"),min:$t.attr("min"),max:$t.attr("max")};if($t.attr("required")||attr_type!="hidden"&&value!=""){if(attr_type=="email")attribute.pattern="email";if(attribute.pattern){if(/^[\/]|[\/]$/.test(attribute.pattern))pattern=eval("/"+attribute.pattern+"/");else pattern=_inline_regex[attribute.pattern];if(pattern&&pattern.test(value)==false)valid=false}if(attribute.min||attribute.max){if(!parseFloat(value))valid=false;if(attribute.min&&parseFloat(attribute.min)>parseFloat(value))valid=false;if(attribute.max&&parseFloat(attribute.max)<parseFloat(value))valid=false}if(attr_type=="checkbox"||attr_type=="radio"){var checked=false;$('input[name="'+$t.attr("name")+'"]').each(function(){if(checked==false){if($(this).attr("checked"))checked=true}});if(checked==false)valid=false}else{if($t._val(options)=="")valid=false}}return valid},_val:function(a){var b=$(this);var c=!b.hasClass(a.classes.placeholder)||!a.reset&&b.val()!=""&&!b.hasClass(a.classes.placeholder)?b.val():"";return c},placeholder:function(a){return this.each(function(){var b=$(this);var c=a?a:b.attr("placeholder");if(c){if(b.val()=="")b.val(c).addClass("placeholder");if(b.val()==c)b.addClass("placeholder");b.focus(function(){if(b.val()=="")b.addClass("placeholder").val(c);if(b.val()==c)b.removeClass("placeholder").val("")});b.blur(function(){if(b.val()=="")b.val(c).addClass("placeholder")})}})},validate:function(a){var b=$(this);var c=_count;a=$.extend(true,{},_default,a);if(a.placeholder&&b._val(a)=="")b.placeholder();else if(a.reset)b.attr("placeholder","");if(a.reset){b.val("");b.attr("checked",false)}return this.each(function(){var b=$(this);var c=$(this);var d=this;if(a.appendToParent)c=c.parent();else if(a.appendToParents)c=c.parents(a.appendToParents);c.addClass(a.classes.before);b.bind(a.bind.before,function(){if(!c.hasClass(a.classes.active)&&!c.hasClass(a.classes.after)){c.addClass(a.classes.before);c.removeClass(a.classes.active).removeClass(a.classes.after)}if(c.hasClass(a.classes.before))a.before(d)});if(a.focusClass){b.bind("focusin",function(){c.addClass(a.classes.focus);a.focus(d,b._validate(a))});b.bind("focusout",function(){c.removeClass(a.classes.focus);a.blur(d,b._validate(a))})}b.bind(a.bind.active,function(){if(b._val(a)!=""&&a.waitToValidate||a.waitToValidate==false){c.addClass(a.classes.active);c.removeClass(a.classes.before).removeClass(a.classes.after);a.active(d,b._validate(a))}});b.bind(a.bind.after,function(){var e=b._validate(a);if(b._val(a)!=""&&a.waitToValidate||a.waitToValidate&&c.hasClass(a.classes.active)||a.waitToValidate==false){c.addClass(a.classes.after);c.removeClass(a.classes.active).removeClass(a.classes.before);if(e){a.valid(d);c.addClass(a.classes.valid).removeClass(a.classes.invalid)}else{a.invalid(d);c.removeClass(a.classes.valid).addClass(a.classes.invalid)}a.after(d,e)}});if(c.attr("autofocus")=="on")b.focus()});_count++},isValid:function(a,b){var c=true;if(typeof a=="undefined")var a=true;else if(typeof a=="object"){b=a;a=true}b=$.extend(true,_default,b);this.each(function(){var d=this;var e=$(d);var f=e;if(b.appendToParent)f=e.parent();else if(b.appendToParents)f=e.parents(b.appendToParents);if(e._validate(b)){if(a)f.addClass(b.classes.valid).removeClass(b.classes.invalid);if(b.valid)b.valid(d)}else{c=false;if(a)f.addClass(b.classes.invalid).removeClass(b.classes.valid);if(b)b.invalid(d)}});return c}})})(jQuery)